<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>anyQuere Settings</title>
    <link rel="stylesheet" href="settings.css">
</head>
<body>
    <div class="settings-container">
        <header class="settings-header">
            <h1>anyQuere Settings</h1>
        </header>

        <main class="settings-main">
            <div class="tabs">
                <button class="tab-btn active" data-tab="sources">File Search</button>
                <button class="tab-btn" data-tab="time">Time Converter</button>
                <button class="tab-btn" data-tab="about">About</button>
            </div>

            <!-- File Search Tab -->
            <div class="tab-content active" id="sources-tab">
                <div class="section">
                    <h2>File Search Configuration</h2>
                    <p>Configure your CSV files and Google Sheets for searching.</p>

                    <div class="sources-table-container">
                        <table class="sources-table">
                            <thead>
                                <tr>
                                    <th>Source</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="sourcesTableBody">
                                <!-- Sources will be populated here -->
                            </tbody>
                        </table>
                    </div>

                    <div class="button-group">
                        <button id="addSourceBtn" class="btn btn-primary">Add Source</button>
                    </div>
                </div>
            </div>

            <!-- Time Converter Tab -->
            <div class="tab-content" id="time-tab">
                <div class="section">
                    <h2>Time Converter Configuration</h2>
                    <p>Configure your preferred time zones, formats, and default behaviors for time conversion.</p>

                    <div class="time-settings-grid">
                        <div class="setting-group">
                            <h3>Default Time Zones</h3>
                            <p>Select which time zones to show by default when converting times.</p>

                            <div class="timezone-list" id="timezoneList">
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="auto">
                                        <span>Local Time (Auto-detect)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="UTC">
                                        <span>UTC</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="America/New_York">
                                        <span>New York (EST/EDT)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="Europe/London">
                                        <span>London (GMT/BST)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="Europe/Paris">
                                        <span>Paris (CET/CEST)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="Asia/Tokyo">
                                        <span>Tokyo (JST)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="Australia/Sydney">
                                        <span>Sydney (AEST/AEDT)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="America/Los_Angeles">
                                        <span>Los Angeles (PST/PDT)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="America/Chicago">
                                        <span>Chicago (CST/CDT)</span>
                                    </label>
                                </div>
                                <div class="timezone-item">
                                    <label>
                                        <input type="checkbox" checked data-timezone="Asia/Dubai">
                                        <span>Dubai (GST)</span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="customTimezone">Add Custom Time Zone:</label>
                                <div class="input-group">
                                    <input type="text" id="customTimezone" placeholder="e.g., Asia/Shanghai, Europe/Berlin">
                                    <button type="button" id="addTimezoneBtn" class="btn btn-secondary">Add</button>
                                </div>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>Display Formats</h3>
                            <p>Choose which formats to display when converting times.</p>

                            <div class="format-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showISO8601">
                                    <span>ISO 8601 (2025-10-15T14:30:00Z)</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showUnixTimestamp">
                                    <span>Unix Timestamp (1756107358)</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showRFC2822">
                                    <span>RFC 2822 (Tue, 15 Oct 2025 14:30:00 GMT)</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showLocalFormat">
                                    <span>Local Format (10/15/2025, 2:30:00 PM)</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showDateOnly">
                                    <span>Date Only (10/15/2025)</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showTimeOnly">
                                    <span>Time Only (2:30:00 PM)</span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>Behavior Settings</h3>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="autoDetectTime">
                                    <span>Automatically detect and convert time strings in clipboard</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showQuickExamples">
                                    <span>Show quick example formats for easy reference</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="copyOnClick">
                                    <span>Copy converted time to clipboard when clicked</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label for="defaultInputFormat">Default Input Format:</label>
                                <select id="defaultInputFormat">
                                    <option value="auto">Auto-detect (Recommended)</option>
                                    <option value="iso8601">ISO 8601</option>
                                    <option value="unix">Unix Timestamp</option>
                                    <option value="us">US Format (MM/DD/YYYY)</option>
                                    <option value="european">European Format (DD.MM.YYYY)</option>
                                    <option value="natural">Natural Language</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="timeZoneDisplayFormat">Time Zone Display Format:</label>
                                <select id="timeZoneDisplayFormat">
                                    <option value="abbreviation">Abbreviation (EST, PST, JST)</option>
                                    <option value="offset">UTC Offset (UTC-5, UTC+8)</option>
                                    <option value="both">Both (EST / UTC-5)</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>Shortcuts & Quick Actions</h3>
                            <p>Configure keyboard shortcuts and quick actions for time conversion.</p>

                            <div class="form-group">
                                <label for="timeShortcut">Time Converter Shortcut:</label>
                                <select id="timeShortcut">
                                    <option value="">Disabled</option>
                                    <option value="CmdOrCtrl+Shift+T">Cmd/Ctrl+Shift+T</option>
                                    <option value="CmdOrCtrl+Shift+C">Cmd/Ctrl+Shift+C</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="showCurrentTimeQuick">
                                    <span>Show "Current Time" quick action button</span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked id="enableClipboardDetection">
                                    <span>Enable clipboard time detection (when opening time converter)</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- About Tab -->
            <div class="tab-content" id="about-tab">
                <div class="section">
                    <h2>About anyQuere</h2>
                    <div class="about-content">
                        <p><strong>Version:</strong> 1.0.0</p>
                        <p><strong>Description:</strong> Fast desktop search for your CSV data and Google Sheets.</p>

                        <h3>Features</h3>
                        <ul>
                            <li>Lightning-fast search through local CSV files</li>
                            <li>Google Sheets integration</li>
                            <li>System tray integration for quick access</li>
                            <li>Keyboard shortcuts (Cmd/Ctrl+K)</li>
                            <li>Configurable search columns and results</li>
                        </ul>

                        <h3>Keyboard Shortcuts</h3>
                        <ul>
                            <li><strong>Cmd/Ctrl+K:</strong> Focus search</li>
                            <li><strong>Escape:</strong> Close search window</li>
                            <li><strong>Enter:</strong> Select search result</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <footer class="settings-footer">
            <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
            <button id="closeSettingsBtn" class="btn btn-secondary">Close</button>
        </footer>
    </div>

    <!-- Add Source Modal -->
    <div class="modal" id="addSourceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Data Source</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="sourceForm">
                    <div class="form-group">
                        <label for="sourceAlias">Source Name</label>
                        <input type="text" id="sourceAlias" required placeholder="e.g., Customers">
                    </div>

                    <div class="form-group">
                        <label for="sourceType">Source Type</label>
                        <select id="sourceType" required>
                            <option value="">Select type...</option>
                            <option value="local">Local CSV File</option>
                            <option value="google">Google Sheet</option>
                        </select>
                    </div>

                    <div class="form-group" id="pathGroup">
                        <label for="sourcePath">File Path / Sheet URL</label>
                        <input type="text" id="sourcePath" required placeholder="/path/to/file.csv or Google Sheet URL">
                        <button type="button" id="browseBtn" class="btn btn-secondary">Browse</button>
                    </div>

                    <div class="form-group">
                        <label for="searchCol">Search Column (0-based)</label>
                        <input type="number" id="searchCol" value="0" min="0" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label for="headerRow">Header Row</label>
                        <input type="number" id="headerRow" value="1" min="1" placeholder="1">
                    </div>

                    <div class="form-group">
                        <label for="maxResults">Max Results</label>
                        <input type="number" id="maxResults" value="10" min="1" max="100" placeholder="10">
                    </div>

                    <div class="form-group">
                        <label for="resultCols">Result Columns</label>
                        <select id="resultCols" multiple style="width: 100%; min-height: 120px;">
                            <option value="">Loading columns...</option>
                        </select>
                        <small>Hold Ctrl/Cmd to select multiple columns. Leave empty to show all columns except search column.</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="testNewSourceBtn" class="btn btn-secondary">Test Connection</button>
                <button id="saveSourceBtn" class="btn btn-primary">Add Source</button>
                <button id="cancelSourceBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Data Preview Modal -->
    <div class="modal" id="dataPreviewModal">
        <div class="modal-content" style="max-width: 900px; width: 90%;">
            <div class="modal-header">
                <h2>Data Preview</h2>
                <button class="modal-close" id="closePreviewModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="preview-info" id="previewInfo">
                    <p><strong>Source:</strong> <span id="previewSourceName">-</span></p>
                    <p><strong>Type:</strong> <span id="previewSourceType">-</span></p>
                    <p><strong>Path:</strong> <span id="previewSourcePath">-</span></p>
                </div>

                <div class="preview-controls">
                    <div class="control-group">
                        <label for="previewRows">Number of rows to load:</label>
                        <select id="previewRows">
                            <option value="10">10 rows</option>
                            <option value="25">25 rows</option>
                            <option value="50" selected>50 rows</option>
                            <option value="100">100 rows</option>
                            <option value="200">200 rows</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <button id="refreshPreviewBtn" class="btn btn-secondary">Refresh</button>
                        <button id="exportPreviewBtn" class="btn btn-secondary">Export CSV</button>
                    </div>
                </div>

                <div class="preview-table-container">
                    <div id="previewLoading" class="loading" style="display: none;">
                        <div class="spinner"></div>
                        <p>Loading data...</p>
                    </div>

                    <div id="previewError" class="error-message" style="display: none;">
                        <p>Failed to load data: <span id="previewErrorText"></span></p>
                    </div>

                    <div id="previewTableContainer" class="table-container">
                        <table id="previewTable" class="data-table">
                            <thead id="previewTableHead">
                                <tr></tr>
                            </thead>
                            <tbody id="previewTableBody">
                                <tr>
                                    <td colspan="100%" style="text-align: center; padding: 40px;">
                                        No data to display. Click "Refresh" to load data.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="preview-stats" id="previewStats" style="display: none;">
                    <p><strong>Total rows:</strong> <span id="totalRows">-</span></p>
                    <p><strong>Columns:</strong> <span id="totalColumns">-</span></p>
                    <p><strong>Last loaded:</strong> <span id="lastLoaded">-</span></p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closePreviewFooterBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <script src="settings.js"></script>
</body>
</html>